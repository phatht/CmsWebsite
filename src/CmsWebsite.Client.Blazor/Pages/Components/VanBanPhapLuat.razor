@using CmsWebsite.Client.Blazor.Services.Article;
@using CmsWebsite.Share.Models.Article;
@using Newtonsoft.Json;

@inject IArticleService ArticleService

<span class="tag my-2">VĂN BẢN</span>
<style>
    ul[role=tablist] {
        justify-content: flex-start !important;
        white-space: nowrap !important;
        overflow-y: hidden !important;
    }
</style>
<RadzenTabs Change=@OnChange TabPosition="TabPosition.TopRight"
            RenderMode="TabRenderMode.Client" >
    <Tabs>
        <RadzenTabsItem Text="HƯỚNG DẪN">
            <div>
                <RadzenTextBox Class="w-100" Placeholder="Tìm kiếm văn bản" />
            </div>
            <div class="mt-2">
                <RadzenDropDown Placeholder="Loại" AllowClear="true" TValue="string" Class="w-100" />
            </div>
            <div class="d-flex justify-content-between mt-2">
                <RadzenDropDown Placeholder="Năm" TValue="int" Data=@years AllowFiltering="true" Style="width: 60%" />
                <RadzenButton Text="Tìm" Icon="search" ButtonStyle="ButtonStyle.Warning" />
            </div>
        </RadzenTabsItem>
        <RadzenTabsItem Text="LUẬT">
        </RadzenTabsItem>
        <RadzenTabsItem Text="XEM NHIỀU">
            <table class="table table-hover" width="100%">

                <tbody>
                    <tr>
                        <td>
                            Hội nghị tổng kết công tác phối hợp giữa Chủ tịch nước và Đoàn Chủ tịch UBTƯ MTTQ Việt Nam
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Gìn giữ bản sắc văn hóa và tinh thần tương thân tương ái trong mỗi kiều bào tại Nhật Bản
                        </td>
                    </tr>
                    <tr>
                        <td>
                            Tình hình thực hiện thí điểm mô hình Trưởng ban Dân vận cấp ủy đồng thời là Chủ tịch Ủy ban MTTQ Việt Nam ở cấp tỉnh, cấp huyện
                        </td>
                    </tr>
                </tbody>
            </table>
        </RadzenTabsItem>
        <RadzenTabsItem Text="TIN MỚI">
            <div style="height: 300px;">
                @foreach (var item in newArticle)
                {
                    <a class="text-decoration-none text-reset" href="/chitietbaiviet/@item.ArticleID">@item.Title</a>
                    <hr />
                }
            </div>
        </RadzenTabsItem>
    </Tabs>
</RadzenTabs>




@code {
    public List<ArticleDTO> articles { get; set; }

    public IEnumerable<ArticleDTO> newArticle { get; set; }

    protected async override Task OnParametersSetAsync()
    {
        articles = await ArticleService.GetListArticle();
        newArticle = articles.OrderByDescending(d => d.CreatedDate).Take(5);
    }

    List<int> years = new List<int>();

    protected override void OnInitialized()
    {
        for (var i = DateTime.Now.Year; i >= 1930; i--)
        {
            years.Add(i);
        }
    }

    void OnChange(int index)
    {

    }
}
